<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>particle text</title>
  <link rel="stylesheet" href="./styles/index.css">
</head>
<body>
<ul class="aside">
  <li>
    <label>文字</label>
    <input id="text" type="text" value="hello, world" onchange="inputChange()">
  </li>
  <li>
    <label>周期</label>
    <input id="duration" type="range" value="0.4" min="0.1" max="0.99" step="0.01"  onchange="inputChange()">
  </li>
  <li>
    <label>半径</label>
    <input id="radius" type="range" value="2" min="1.8" max="20" step="0.1"  onchange="inputChange()">
  </li>
  <li>
    <label>分辨率</label>
    <input id="resolution" type="range"  value="6" min="3" max="20" step="1" onchange="inputChange()">
  </li>
</ul>
<main>
  <canvas id="canvas"></canvas>
</main>
</body>
<script src="./scripts/particleText.js"></script>
<script>

  let main = document.querySelector('main')
  let pt = new particleText({
    container: main,
    width: Number(getStyle(main, 'width').replace('px', '')),
    height: Number(getStyle(main, 'height').replace('px', '')),
  })

  function getStyle(el, ruleName) {
    return getComputedStyle(el, null).getPropertyValue(ruleName)
  }

  inputChange()

  function inputChange() {
    let text = document.querySelector('#text').value
    let duration = Number(document.querySelector('#duration').value)
    let radius = Number(document.querySelector('#radius').value)
    let resolution = Number(document.querySelector('#resolution').value)

    pt.draw(text, {
      duration:duration,
      radius: radius,
      resolution:resolution,
    })
  }
</script>
</html>
